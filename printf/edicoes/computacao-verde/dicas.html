<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Printf - Computação Verde</title>
    <link rel="stylesheet" href="../../assets/css/lib/bootstrap.min.css">
    <link rel="stylesheet" href="../../assets/css/printf.css">
    <link rel="stylesheet" href="../../assets/css/edicoes.css">
  </head>
  <body>
    <div class="container">
      <div class="row">
        <div class="col-sm-4 navegacao">
          <h1><a href="../../index.html">Printf</a></h1>
          <h1><a href="index.html">Computação Verde</a></h1>
          <ul>
            <li><a href="editorial.html">Editorial</a></li>
            <li><a href="imaismais.html">i++</a></li>
            <li><a href="games.html">Games</a></li>
            <li><a href="noticias.html">Notícias</a></li>
            <li><a href="softwarelivre.html">Software Livre</a></li>
            <li><a href="mundoacademico.html">Mundo Acadêmico</a></li>
            <li class="menuSelecionado"><a href="dicas.html">Dicas</a></li>
            <li><a href="entrevistas.html">Entrevista</a></li>
            <li><a href="cartas.html">Cartas do Leitor</a></li>
          </ul>
        </div>
        <div class="col-sm-8">
          <h1 class="secao">Dicas</h1>
          <p class="autor">Autores: Eder Paraiso C. Flor e Pedro Henrique Araújo</p>
          <p>Amplie seus horizontes, confira aqui dicas de programação e auxílio no dia-a-dia acadêmico!</p>
          <h2>Desempenho entre aspas</h2>
          <p>Um bom programa, além de resolver o problema proposto, o resolve (ou tenta) da forma mais eficiente possível. Comecemos com uma proposta bem genérica: fazer uma aplicação onde a manipulação de strings é muito frequente. Vamos trabalhar com strings. Muitas strings. Consideremos que há duas opções: construir o aplicativo em C ou em Java.</p>
          <p>Além da manipulação de ponteiros, a falta do "tipo" String afasta muita gente da programação em linguagens procedimentais como C e as aproxima das linguagens orientadas a objeto, por exemplo. Façamos então em Java. Ok, a geração de um código intermediário degrada o desempenho frente à linguagens como C, mas não é desse desempenho que será tratado.</p>
          <p>A manipulação de cadeias de caracteres em Java é extremamente simples. Há várias classes para isso. A mais usada e conhecida é a classe String, do pacote java.lang. Precisou de uma string? É fácil, crie e use!</p>
          <div class="row">
            <div class="col-sm-6">
              <p><code>String x = "hello"; </code></p>
              <p>Vai precisar unir com outra string? É mais fácil ainda! </p>
              <p><code>String a = x + " world";</code></p>
            </div>
            <div class="col-sm-6">
              <div class="thumbnail">
                  <img src="imagens/dicas_array.png" alt="">
              </div>
            </div>
          </div>
          <p>Pronto, em duas linhas extremamente simples você uniu duas strings. Pense o trabalho que seria fazer isso manipulando arrays de char, controlar o tamanho e alocação de memória para a string resultante... O objetivo das classes de manipulação de strings é exatamente esse: encapsular essas operações corriqueiras para os desenvolvedores. Mas às vezes esse encapsulamento pode nos atrapalhar.</p>
          <p>Muitos devem pensar: "por que (ou para que) existe mais de uma classe que manipula strings?". Em Java temos as classes String, StringBuffer e StringBuilder. Cada uma delas tem suas peculiaridades no modo como foram implementadas e podem trazer alguns resultados significativos dependendo do objetivo da sua aplicação.</p>
          <p>Retomando a proposta no início da matéria, e se as operações com strings mais frequentes fossem concatenações? Qual seria o impacto de performance para cada uma dessas classes de string? Vamos continuar utilizando o simples operador "+"? Vejamos.</p>
          <h3>Classes e mais Classes</h3>
          <p>Trataremos específicamente das diferenças entre as classes String e StringBuffer. A classe StringBuilder trabalha de forma semelhante a StringBuffer. A classe String é utilizada para cadeias de caracteres que não podem ser mudadas. Ou seja, os objetos do tipo String são read only, imutáveis. Qualquer operação que resulte na alteração dessa string necessitará de um novo objeto. Por outro lado, a classe StringBuffer é utilizada para cadeias de caracteres que podem ser modificadas, daí a referência ao nome buffer.</p>
          <p>Consideremos a seguinte concatenação utilizando a classe String:</p>
          <div class="row">
            <div class="col-sm-6">
              <p><code>String str = new String ("Revista "); </code></p>
              <p><code>str += "printf!!"; </code></p>
              <p>Se usássemos a classe StringBuffer para realizar a mesma concatenação, o código seria: </p>
              <p><code>StringBuffer str = new StringBuffer ("Revista "); </code></p>
              <p><code>str.append("printf!!");</code></p>
            </div>
            <div class="col-sm-6">
              <div class="thumbnail">
                <img src="imagens/dicas_aspas.png" alt="">
              </div>
            </div>
          </div>
          <p>Observando rapidamente, poderíamos pensar que a primeira forma é mais eficiente pois, no segundo exemplo, temos uma chamada de método adicional "append()". Isso nos induz a pensar que a chamada de método é mais custosa que o uso do operador de concatenação "+" que une dois objetos da classe String.</p>
          <p>O operador "+" parece inocente e prático, mas essa praticidade pode custar caro. De fato, a concatenação utilizando StringBuffer produz um código mais rápido. Se analisarmos as instruções dos bytecodes gerados veremos que a concatenação utilizando "+" resulta na criação de um objeto temporário do tipo StringBuffer, que chama o método append().</p>
          <p>Sim, mesmo utilizando objetos String, criaremos um objeto a mais do tipo StringBuffer! As coisas ficam interessantes aqui. Como isso é possível?</p>
          <p>Como dito anteriormente, a classe String é imutável. A concatenação é uma alteração na cadeia original, sendo necessário a criação de outro objeto. Assim, um StringBuffer é usado para realizar a concatenação.</p>
          <p>Após a união das strings, feitas no objeto StringBuffer, ocorre a criação de um novo objeto String a partir da chamada de um método toString(). Cada vez que você concatenar algo utilizando o operador "+" uma nova String é criada, o conteúdo antigo é copiado, o conteúdo adicional é concatenado e a String antiga é descartada. Portanto, a criação temporária de um objeto StringBuffer e sua transformação para String são operações caras.</p>
          <p>Em contrapartida, se observarmos o código do bytecode gerado quando se utiliza a classe StringBuffer, notamos que também ocorre a chamada do método append() mas sem a necessidade de criar um objeto StringBuffer temporário. O código cria apenas um objeto, StringBuffer, e o converte para String.</p>
          <p>Concluindo, a concatenação com StringBuffer é significativamente mais rápida do que concatenação de objetos String. Se a funcionalidade da classe String é desejada, considere usar um StringBuffer para concatenação e depois realizar uma conversão para String.</p>
          <h3>Ainda há salvação para o operador "+"?</h3>
          <p>Apesar da má impressão e da péssima imagem criada, o operador de concatenação não afeta a performance sempre que utilizado. Veja:</p>

          <ol>
            <div class="row">
              <div class="col-sm-8">
                <li>Strings com varias linhas</li>
                <p><code>String text=<br>"Hello\n"+<br>"World\n"+<br>"Again";</code></p>
              </div>
              <div class="col-sm-4">
                <div class="thumbnail">
                  <img src="imagens/dicas_cruz.png" alt="">
                </div>
              </div>
            </div>

            <p>Neste caso, pode-se inserir vários blocos de texto concatenados. O compilador cria um único objeto String e a concatenação ocorre em tempo de execução.</p>

            <li>Mensagens Curtas</li>
            <p><code>System.out.println("x = "+x+ " y = "+y);</code></p>
            <p>Como o compilador age:</p>
            <p><code>System.out.println((new StringBuilder()) .append("x = ").append(x).append(" y = ").append(y)
.toString());</code></p>
          </ol>

          <p>O compilador não gera vários String. Útil para economizar codificação.</p>
          <p>Agora, para aqueles interessados nos bytecodes: De acordo com o tópico publicado em http://kaioa.com/node/59, para concatenação de dois ou três operandos, utiliza-se o operador "+"; para quatro ou mais, dê preferencia para StringBuffer. Quem diria... um simples "+" pode gerar tanta polêmica quanto discutir uma linguagem apropriada para construir uma aplicação! Com o encapsulamento, os detalhes por vezes nos escapam e com um leque de opções disponíveis poucas vezes temos a curiosidade de saber as peculiaridades de cada uma.</p>

          <div class="row">
            <div class="col-sm-8">
              <p>Para aplicações corriqueiras ou de criticidade pequena, pode ser algo bobo com o que se preocupar. Mas vejamos um exemplo básico e não tão distante: Programação para dispositivos móveis. Os dispositivos móveis possuem quantidade de memória limitada e poder de processamento baixo se comparado à desktops, por exemplo. Um prato cheio. E limitado. Neste caso, a forma como se concatenam as possíveis strings de seu aplicativo pode fazer uma diferença significativa em um ambiente tão limitado. Uma pesquisa a mais pode trazer grandes benefícios à suas aplicações, bem como conhecimento. Fica aí a dica.</p>
            </div>
            <div class="col-sm-4">
              <div class="thumbnail">
                <img src="imagens/dicas_prato.png" alt="">
              </div>
            </div>
          </div>

          <h4>Referências:</h4>
          <p><a href="http://kaioa.com/node/59">StringBuilder vs StringBuffer vs String.concat - done right. </a></p>
          <p><a href="http://www.javaworld.com/javaworld/jw-03-2000/jw-0324-javaperf.html">StringBuffer versus String.</a></p>

          <h2>SQL Injection - Vacine suas aplicações!</h2>
          <p>Segurança. Um assunto que desperta curiosidade e faz brilhar os olhos de muita gente. Hackers, invasão de sistemas, cenas que mais parecem parte do roteiro de filmes de ficção. Mas nem tudo é fantasia. Pergunte para os que desenvolvem sistemas web: como anda a segurança de suas aplicações? Já pararam para pensar nisso?</p>
          <p>Muitos não percebem esses detalhes ou não se preocupam com as falhas de segurança que uma aplicação pode ter, seja por falta de conhecimento ou por questão de custos e prazos no projeto. No entanto, a segurança das informações é um assunto que exige atenção especial, principalmente em se tratando de informações armazenadas em bancos de dados acessados via Web.</p>
          <p>Existem várias formas de se explorar vulnerabilidades em sistemas. Nesta matéria ficaremos restritos a uma vulnerabilidade comum em aplicações baseadas em bancos de dados SQL: SQL Injection (Injeção SQL). SQL Injection é o termo utilizado para designar a inserção de código SQL malicioso em uma operação select, no contexto de uma aplicação.</p>
          <div class="row">
            <div class="col-sm-8">
              <p>Um usuário mal intencionado pode se valer da sintaxe da SQL para inserir instruções maliciosas na consulta que está por trás de uma janela da uma aplicação. Por exemplo, considere a tela de login de uma aplicação. Considere também que o login do usuário é "sulu" e que sua senha é "spock". Ao preencher esses dados e pressionar o botão "ENTRAR", a aplicação provavelmente irá realizar a seguinte consulta: <code>SELECT id FROM user WHERE nome = 'sulu' AND senha = 'spock';</code></p>
            </div>
            <div class="col-sm-4">
              <div class="thumbnail">
                  <img src="imagens/dicas_login.jpg" alt="">
              </div>
            </div>
          </div>
          <p>Ok, mas se o sr. Sulu estiver mal intensionado ele poderá o se idenficar para aplicação tal qual a figura aí ao lado. O resultado: a tabela "user" será removida do banco de dados. Vejamos porque. Após o sr. Sulu ter pressionado o botão "ENTRAR", a aplicação irá gerar a seguinte sequência de SQL: <code>SELECT id FROM user WHERE nome = 'sulu'; DROP TABLE usuarios ; --' AND senha = 'meusegredo';</code></p>
          <p>O caracter ";" é um separador de instruções, então duas instruções serão executadas: select e drop table. A string "--" que, na sintaxe SQL representa o início de comentários de linha, faz com que o restante da consulta original seja desconsiderada. Pronto, está concluída a injeção, que neste caso, "inoculou um veneno" doloroso.</p>
          <h3>Protegendo-se</h3>
          <p>Depois de tanta explicação de como ocorre um ataque por SQL Injection, vamos tratar logo de proteger contra isso. Consideremos um formulário para login de usuários. Sem nenhuma verificação, o invasor pode logar como qualquer usuário, se ele souber o nome do usuário, usando:<code>usuario: admin'--</code></p>
          <p>Ou o atacante pode logar como o primeiro usuário da tabela 'usuarios', com a inserção abaixo:<code>usuario: ' or 1=1--</code></p>

          <p>A expressão "or 1=1" sempre retornará true, independente se o usuário e a senha estão corretos ou não. Alguns métodos de proteção são o tratamento de strings ou o uso de Prepared Statements. Vejamos um exemplo de tratamento de strings em PHP e um exemplo de Prepared Statements em Java. Lembrando que ambas as técnicas podem ser utilizadas tanto em Java quanto em PHP.</p>

          <h3>Tratamento de Strings</h3>
          <p>Consideremos o seguinte script em PHP:</p>

          <div class="thumbnail">
            <img src="imagens/php1.png" alt="">
          </div>

          <p>Todos os valores coletados devem ser validados e tratados para impedir a execução de outras instruções que não aquelas previstas. Um tratamento básico para a execução de desse tipo de query pode ser tratando as aspas adicionais que podem surgir:</p>

          <div class="thumbnail">
            <img src="imagens/php1.png" alt="">
          </div>

          <p>A função addslashes(), do próprio PHP, adiciona uma barra invertida antes de cada aspa simples e aspa dupla encontrada. Mas, existe também a diretiva de configuração do PHP magic_quotes_gpc. Se ela estiver ativada, o escape é realizado automaticamente sobre os dados. A função get_magic_quotes_gpc(), disponível nas versões do PHP a partir da 3.0.6, retorna a configuração atual da diretiva magic_quotes_gpc. Abaixo, a query string resultante do tratamento:</p>

          <p><code>SELECT id, cpf FROM usuario WHERE nome =' \' or 1=1--' AND senha = 'meusegredo' ;</code></p>

          <h3>Prepared Statements</h3>
          <p>Seja o seguinte código java:</p>

          <div class="thumbnail">
            <img src="imagens/cod.gif" alt="">
          </div>

          <p>A concatenação da string query com os valores das variáveis usuario e senha, combinado com o uso da classe Statement deixa espaço para a invasão. Para resolver esse tipo de coisa você pode usar PreparedStatement ao invés de Statement. Prepared Statements são comandos pré processados, permitindo a construção de pré queries SQL que podem ser reutilizadas para efetuar queries iguais com diferentes valores de parâmetros.</p>

          <p>O que fazemos é criar a query, deixando os valores das variáveis indefinidos. Então especificamos esses valores antes de executar a query. Isso permite que a mesma query padrão possa ser executada várias vezes, variando apenas os parâmetros.</p>

          <p>Na hora de construir a query, substitua os valores das variáveis com o simbolo de interrogação. O objeto PreparedStatement suporta vários métodos, cada um com o fim de definir um valor de um tipo específico (int, long, String, etc). Cada método recebe dois argumentos, um índice indicando qual o parâmetro que queremos acessar e o valor a ser inserido. O primeiro parâmetro tem o índice 1 (e não 0). Assim, temos:</p>

          <div class="thumbnail">
            <img src="imagens/java2.png">
          </div>

          <p>Uma vez criados os Prepared statements, você pode reutilizá-los a vontade. Além de segurança, você leva de brinde desempenho, já que o banco de dados precisará compilar as instruções apenas uma vez.</p>

          <h3>Casos no dia-a-dia</h3>
          <p>O site G1, da globo publicou em 28/08/09 a seguinte notícia de golpes virtuais (acompanhe trechos)</p>
          <div class="row">
            <div class="col-sm-8">
              <p>Do G1, com informações da Associated Press</p>
              <p>"O hacker Albert Gonzales, de 28 anos, assumiu nesta sexta-feira (28) a culpa pela invasão de sistemas e roubo de dados referentes a cartões de crédito, segundo documentos de um acordo apresentados em tribunal de Boston. Gonzales era acusado de comandar um grupo para invasão de sistemas e roubo de informações, incluindo dados relativos a mais de 130 milhões de cartões de crédito e débito.(...)</p>
            </div>
            <div class="col-sm-4">
              <img src="imagens/dicas_cadeado.png" class="img img-responsive">
            </div>
          </div>

          <strong>Golpes na web</strong>
          <p>Albert usava na web os nomes "segvec", "soupnazi" e "j4guar17" e era acusado, juntamente com outros dois hackers não identificados, de usar uma sofisticada técnica de invasão chamada "ataque de injeção SQL", para roubar informações sobre cartões de crédito e de débito. Nesse tipo de ataque, o invasor se infiltra no banco de dados por meio de um problema nos sistemas que com ele interagem. (...)</p>
          <p>De acordo com o Departamento de Justiça dos EUA, este é o maior caso de violação de dados de cartões de crédito e de débito já levado a um tribunal norte-americano. " (para ver o texto na íntegra, acesse o site da <a href="http://g1.globo.com/Noticias/Tecnologia/0,,MUL1284871-6174,00.html">globo.com</a>)</p>
          <p>Com isso vemos que uma solução é o tratamento dos valores antes da execução da query. Como vimos no exemplo de PHP, há casos em que a própria linguagem fornece diretivas para o tratamento de strings. Alguns frameworks que automatizam/encapsulam essa comunicação com o banco de dados também se protegem e fazem o tratamento devido dos dados.</p>
          <p>Mesmo os meios de proteção já existindo automaticamente em alguns cenários, o intuito dessa matéria foi expor questões de segurança, as vezes desconhecidas, principalmente por quem está iniciando o desenvolvimento.</p>
          <p>Outra dica importante é evitar a exibição das mensagens de erro em um servidor de aplicação em produção, pois geralmente nos erros ou alertas são exibidos caminhos de diretórios do sistema de arquivos e informações à respeito do esquema do banco de dados, podendo comprometer a segurança do sistema.</p>
          <div class="row">
            <div class="col-sm-2">
              <img src="imagens/dicas_seringa.png" class="img img-responsive" alt="">
            </div>
            <div class="col-sm-10">
              <p>Cabe ao desenvolvedor estar atento às possíveis brechas de segurança existentes nos códigos fonte que produz, principalmente quando o que está em jogo é um bem de grande valia: a informação. Já diziam por ai: mais vale previnir do que remediar. Previnam-se, vacinem suas aplicações! E o mais importante: chequem regularmente o cartão de vacinas, ou seja, mantenha-se informado! </p>
            </div>
          </div>
          <h4>Referências</h4>
          <p><a href="http://g1.globo.com/Noticias/Tecnologia/0,,MUL1284871-6174,00.html">Hacker norte-americano assume culpa por invasão e roubo de dados financeiros. </a></p>
          <p><a href="http://www.unixwiz.net/techtips/sql-injection.html">Steve Friedl's Unixwiz.net Tech Tips - SQL Injection Attacks by Example. </a></p>
          <p><a href="http://infoblogs.com.br/view.action?contentId=12073&Statement-e-SQL-injection-em-Java.html">Statement e SQL injection em Java. </a></p>
          <p><a href="http://imasters.uol.com.br/artigo/5179/sql_injection_no_php_o_que_e_e_como_se_proteger">SQL Injection no PHP: O que é e como se proteger.</a></p>

          <h2>Computação - Veni, vidi, vici</h2>
          <p>Veni, vidi, vici (em português: "Vim, vi, venci") é uma famosa frase latina supostamente proferida pelo general e cônsul romano Júlio César em 47 a.C.. César utilizou a frase numa mensagem ao Senado Romano descrevendo sua recente vitória sobre Farnaces II do Ponto na Batalha de Zela.</p>
          <p>Todo início de semestre é a mesma história: começa com a força toda, mas com o tempo a animação já não é a mesma. Tropeços, deslizes e o que começou perfeitamente bem, agora virou uma avalanche inevitável. Apareceu aquele sentimento de que você está encurralado, sem saída?</p>
          <div class="thumbnail">
            <img src="imagens/dicas_exercito.png" alt="">
          </div>
          <p>Armamento novo na área! Sempre há uma saída. E você, também está a fim de completar o curso de maneira vitoriosa? Então fique atento as dicas que selecionamos que podem te tornar um verdadeiro gladiador, basta ter disciplina e força (de vontade)!</p>
          <ul>
            <li><strong>Agende-se: </strong>antes de qualquer coisa, faça sua agenda, seu cronograma de horários. Sem isso você pode ficar perdido e sem saber o que fazer em determinada hora do dia. Lembre-se sempre de colocar os momentos de lazer e de outras atividades que não estejam relacionadas ao estudo. </li>
          </ul>
          <div class="row">
            <div class="col-sm-4">
              <img src="imagens/dicas_einsten.png" class="img img-responsive" alt="">
            </div>
            <div class="col-sm-8">
              <li><strong>Aula dada, aula estudada:</strong> não deixe acumular matéria, são muitas. Deixar para estudar apenas nas vésperas das provas pode prejudicar outras atividades. Além disso, sem ter estudado as aulas passadas, é possível que você não entenda bem o que o professor fala em sala de aula, prejudicando o entendimento de toda a matéria que ainda será dada.</li>
              <li><strong>Não passe do seu limite:</strong> todos têm limites e deve-se respeitá-lo. Ultrapassar o próprio limite pode custar caro. Pode ser que você não esteja preparado e acabe se prejudicando, perdendo rendimento e maltratando seu próprio corpo. </li>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-8">
              <li><strong>Tenha prioridades: </strong>dê maior prioridade para as matérias que exigem uma maior atenção e concentração. Assim você distribui melhor o tempo gasto com cada disciplina.</li>
              <li><strong>Não desista: </strong>se você não foi obteve bom desempenho nas primeiras avaliações, não desanime. Ainda há tempo, corra atrás do prejuízo, você ainda é capaz de recuperá-lo. Procure colegas e professores, não tenha vergonha de pedir ajuda.</li>
            </div>
            <div class="col-sm-4">
              <img src="imagens/dicasbalanca.png" class="img img-responsive" alt="">
            </div>
          </div>

          <div class="row">
            <div class="col-sm-4">
              <img src="imagens/dicas_associatividade.png" class="img img-responsive" alt="">
            </div>
            <div class="col-sm-8">
              <li><strong>Ajude: </strong>sempre que for solicitado, tente ajudar os colegas, pois assim é uma maneira de rever o conteúdo. A dúvida de um colega pode ser relacionada a algum tópico que passou despercebido por você enquanto estudava. </li>
              <li><strong>Divirta-se: </strong>qualidade de vida também é importante. Assista um bom filme, ouça uma boa música, aproveite o fim de semana. Isso ajudará a manter o bom humor, diminuindo o stress acumulado durante a semana. </li>
            </div>
          </div>

          <div class="row">
            <div class="col-sm-8">
              <li><strong>Pense no futuro: </strong>nunca esqueça o motivo de sua formação acadêmica. Pense no que você quer alcançar quando se formar. Mantenha o foco e motive-se para concluir seus estudos com êxito.</li>
              <p>Pronto! Com um pouco de prática e organização é possível fazer o que às vezes parece impossível. Organize-se, coloque as dicas em prática e prepare-se para a luta do semestre! </p>
            </div>
            <div class="col-sm-4">
              <img src="imagens/dicas_objetivo.png" alt="">
            </div>
          </div>
          <div class="thumbnail">
            <img src="imagens/dicas_anciao.png" alt="">
          </div>

          <h4>Referências: </h4>
          <p><a href="http://pt.wikipedia.org/wiki/Veni,_vidi,_vici">Veni, vidi, vici</a></p>

        </div>
      </div>
    </div>
  </body>
</html>
